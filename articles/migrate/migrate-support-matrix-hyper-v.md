---
title: Support for Hyper-V assessment in Azure Migrate
description: Learn about support for Hyper-V assessment with Azure Migrate.
ms.topic: conceptual
ms.date: 01/08/2020
---

# Support matrix for Hyper-V assessment

This article summarizes support settings and limitations for assessing Hyper-V VMs with [Azure Migrate: Server Assessment](migrate-services-overview.md#azure-migrate-server-assessment-tool) . If you're looking for information about migrating Hyper-V VMs to Azure, review the [migration support matrix](migrate-support-matrix-hyper-v-migration.md).

## Overview

To assess on-premises machines for migration to Azure with this article, you add the Azure Migrate: Server Assessment tool to an Azure Migrate project. You deploy the [Azure Migrate appliance](migrate-appliance.md). The appliance continuously discovers on-premises machines, and sends configuration and performance data to Azure. After machine discovery, you gather discovered machines into groups, and run an assessment for a group.


## Limitations

**Support** | **Details**
--- | ---
**Assessment limits**| Discover and assess up to 35,000 Hyper-V VMs in a single [project](migrate-support-matrix.md#azure-migrate-projects).
**Project limits** | You can create multiple projects in an Azure subscription. A project can include VMware VMs, Hyper-V VMs, and physical servers, up to the assessment limits.
**Discovery** | The Azure Migrate appliance can discover up to 5000 Hyper-V VMs.<br/><br/> The appliance can connect to up to 300 Hyper-V hosts.
**Assessment** | You can add up to 35,000 machines in a single group.<br/><br/> You can assess up to 35,000 VMs in a single assessment.

[Learn more](concepts-assessment-calculation.md) about assessments.



## Hyper-V host requirements

| **Support**                | **Details**               
| :-------------------       | :------------------- |
| **Host deployment**       | The Hyper-V host can be standalone or deployed in a cluster. |
| **Permissions**           | You need administrator permissions on the Hyper-V host. <br/> Alternatively, if you don't want to assign Administrator permissions, create a local or domain user account and add the user to these groups- Remote Management Users, Hyper-V Administrators and Performance Monitor Users. |
| **Host operating system** | Windows Server 2019, Windows Server 2016 or Windows Server 2012 R2.<br/> You can't assess VMs located on Hyper-V hosts running Windows Server 2012. |
| **PowerShell Remoting**   | Must be enabled on each host. |
| **Hyper-V Replica**       | If you use Hyper-V Replica (or you have multiple VMs with the same VM identifiers), and discover both the original and replicated VMs using Azure Migrate, the assessment generated by Azure Migrate might not be accurate. |


## Hyper-V VM requirements

| **Support**                  | **Details**               
| :----------------------------- | :------------------- |
| **Operating system** | All [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/endorsed-distros) operating systems that are supported by Azure. |
| **Integration Services**       | [Hyper-V Integration Services](https://docs.microsoft.com/virtualization/hyper-v-on-windows/reference/integration-services) must be running on VMs that you assess, in order to capture operating system information. |


## Azure Migrate appliance requirements

Azure Migrate uses the [Azure Migrate appliance](migrate-appliance.md) for discovery and assessment. The appliance for Hyper-V runs on a Hyper-V VM, and is deployed using a compressed Hyper-V VHD that you download from the Azure portal. 

- Learn about [appliance requirements](migrate-appliance.md#appliance---hyper-v) for Hyper-V.
- Learn about [URLs](migrate-appliance.md#url-access) the appliance needs to access.

## Port access

The following table summarizes port requirements for assessment.

**Device** | **Connection**
--- | ---
**Appliance** | Inbound connections on TCP port 3389 to allow remote desktop connections to the appliance.<br/> Inbound connections on port 44368 to remotely access the appliance management app using the URL: ``` https://<appliance-ip-or-name>:44368 ```<br/> Outbound connections on ports 443, 5671 and 5672 to send discovery and performance metadata to Azure Migrate.
**Hyper-V host/cluster** | Inbound connections on WinRM ports 5985 (HTTP) and 5986 (HTTPS) to pull configuration and performance metadata of the Hyper-V VMs using a Common Information Model (CIM) session.

## Agent-based dependency visualization

[Dependency visualization](concepts-dependency-visualization.md) helps you to visualize dependencies across machines that you want to assess and migrate. For agent-based visualization, requirements and limitations are summarized in the following table


**Requirement** | **Details**
--- | ---
**Deployment** | Before you deploy dependency visualization you should have an Azure Migrate project in place, with the Azure Migrate: Server Assessment tool added to the project. You deploy dependency visualization after setting up an Azure Migrate appliance to discover your on-premises machines.<br/><br/> Dependency visualization isn't available in Azure Government.
**Service Map** | Agent-based dependency visualization uses the [Service Map](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-service-map) solution in [Azure Monitor logs](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview).<br/><br/> To deploy, you associate a new or existing Log Analytics workspace with an Azure Migrate project.
**Log Analytics workspace** | The workspace must be in the same subscription as the Azure Migrate project.<br/><br/> Azure Migrate supports workspaces residing in the East US, Southeast Asia and West Europe regions.<br/><br/>  The workspace must be in a region in which [Service Map is supported](https://docs.microsoft.com/azure/azure-monitor/insights/vminsights-enable-overview#prerequisites).<br/><br/> The workspace for an Azure Migrate project can't be modified after it's added.
**Charges** | The Service Map solution doesn't incur any charges for the first 180 days (from the day that you associated the Log Analytics workspace with the Azure Migrate project).<br/><br/> After 180 days, standard Log Analytics charges will apply.<br/><br/> Using any solution other than Service Map in the associated Log Analytics workspace will incur standard Log Analytics charges.<br/><br/> If you delete the Azure Migrate project, the workspace isn't deleted with it. After deleting the project, Service Map isn't free, and each node will be charged as per the paid tier of Log Analytics workspace.
**Agents** | Agent-based dependency visualization requires two agents to be installed on each machine you want to analyze.<br/><br/> - [Microsoft Monitoring agent (MMA)](https://docs.microsoft.com/azure/log-analytics/log-analytics-agent-windows)<br/><br/> - [Dependency agent](https://docs.microsoft.com/azure/azure-monitor/platform/agents-overview#dependency-agent). 
**Internet connectivity** | If machines aren't connected to the internet, you need to install the Log Analytics gateway on them.


## Next steps

[Prepare for Hyper-V VM assessment](tutorial-prepare-hyper-v.md)
