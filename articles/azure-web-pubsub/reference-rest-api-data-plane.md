---
title: Azure Web PubSub service data plane REST API reference overview
description: Describes the REST APIs Azure Web PubSub supports to manage the WebSocket connections and send messages to them.
author: vicancy
ms.author: lianwei
ms.service: azure-web-pubsub
ms.topic: reference
ms.date: 06/09/2022
---

# Azure Web PubSub service data plane REST API reference

![Diagram showing the Web PubSub service workflow.](./media/concept-service-internals/workflow.png)

As illustrated by the above workflow graph, and also detailed workflow described in [internals](./concept-service-internals.md), your app server can send messages to clients or to manage the connected clients using REST APIs exposed by Web PubSub service. This article describes the REST APIs in detail.

[!INCLUDE [Connection string security](includes/web-pubsub-connection-string-security.md)]

## Using REST API

### Authenticate via Azure Web PubSub Service AccessKey

In each HTTP request, an authorization header with a [JSON Web Token (JWT)](https://en.wikipedia.org/wiki/JSON_Web_Token) is required to authenticate with Azure Web PubSub Service.

<a name="signing"></a>

#### Signing Algorithm and Signature

`HS256`, namely HMAC-SHA256, is used as the signing algorithm.

You should use the `AccessKey` in Azure Web PubSub Service instance's connection string to sign the generated JWT token.

#### Claims

Below claims are required to be included in the JWT token.

| Claim Type | Is Required | Description                                                                                                                                                                                 |
| ---------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `aud`      | true        | Should be the **SAME** as your HTTP request url. For example, a broadcast request's audience looks like: `https://example.webpubsub.azure.com/api/hubs/myhub/:send?api-version=2022-11-01`. |
| `exp`      | true        | Epoch time when this token will be expired.                                                                                                                                                 |

A pseudo code in JS:

[!INCLUDE [Connection string security comment](includes/web-pubsub-connection-string-security-comment.md)]

```js
const bearerToken = jwt.sign({}, connectionString.accessKey, {
  audience: request.url,
  expiresIn: "1h",
  algorithm: "HS256",
});
```

### Authenticate via Microsoft Entra token

Like using `AccessKey`, a [JSON Web Token (JWT)](https://en.wikipedia.org/wiki/JSON_Web_Token) is also required to authenticate the HTTP request.

**The difference is**, in this scenario, JWT Token is generated by Microsoft Entra ID.

[Learn how to generate Microsoft Entra tokens](../active-directory/develop/reference-v2-libraries.md)

The credential scope used should be `https://webpubsub.azure.com/.default`.

You could also use **Role Based Access Control (RBAC)** to authorize the request from your server to Azure Web PubSub Service.

[Learn how to configure Role Based Access Control roles for your resource](./howto-authorize-from-application.md#add-a-role-assignment-in-the-azure-portal)

## APIs

| Operation Group                                             | Description                                                              |
| ----------------------------------------------------------- | ------------------------------------------------------------------------ |
| [Service Status](/rest/api/webpubsub/dataplane/health-api)  | Provides operations to check the service status                          |
| [Hub Operations](/rest/api/webpubsub/dataplane/web-pub-sub) | Provides operations to manage the connections and send messages to them. |
