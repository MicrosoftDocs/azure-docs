---
title: Audit logs for Azure Database for MySQL
description: Describes the audit logs available in Azure Database for MySQL, and the available parameters for enabling logging levels.
author: ajlam
ms.author: andrela
ms.service: mysql
ms.topic: conceptual
ms.date: 06/11/2019
---

# Audit Logs in Azure Database for MySQL

In Azure Database for MySQL, the audit log is available to users. The audit log can be used to track database-level activity and is commonly used for compliance.

> [!IMPORTANT]
> Audit log functionality is currently in preview.

## Configure audit logging

By default the audit log is disabled. To enable it, set `audit_log_enabled` to ON.

Other parameters you can adjust include:

- `audit_log_events`: controls the events to be logged. See below table for specific audit events.
- `audit_log_exclude_users`: MySQL users to be excluded from logging. Allows for at most four users. Max length of the parameter is 256 characters.

| **Event** | **Description** |
|---|---|
| `CONNECTION` | - Connection initiation (successful or unsuccessful) <br> -  User reauthentication with different user/password during session <br> - Connection termination |
| `DML_SELECT`| SELECT queries |
| `DML_NONSELECT` | INSERT/DELETE/UPDATE queries |
| `DML` | DML = DML_SELECT + DML_NONSELECT |
| `DDL` | Queries like "DROP DATABASE" |
| `DCL` | Queries like "GRANT PERMISSION" |
| `ADMIN` | Queries like "SHOW STATUS" |
| `GENERAL` | All in DML_SELECT, DML_NONSELECT, DML, DDL, DCL, and ADMIN |
| `TABLE_ACCESS` | - Only available for MySQL 5.7 <br> - Table read statements, such as SELECT or INSERT INTO ... SELECT <br> - Table delete statements, such as DELETE or TRUNCATE TABLE <br> - Table insert statements, such as INSERT or REPLACE <br> - Table update statements, such as UPDATE |

## Access audit logs

Audit logs are integrated with Azure Monitor Diagnostic Logs. Once you've enabled audit logs on your MySQL server, you can emit them to Azure Monitor logs, Event Hubs, or Azure Storage. To learn more about how to enable diagnostic logs in the Azure portal, see the [audit log portal article](howto-configure-audit-logs-portal.md#set-up-diagnostic-logs).

## Diagnostic Logs Schemas

The following sections describe what's output by MySQL audit logs based on the event type. Depending on the output method, the fields included and the order in which they appear may vary.

### Connection

| **Property** | **Description** |
|---|---|
| `TenantId` | Your tenant ID |
| `SourceSystem` | `Azure` |
| `TimeGenerated` [UTC] | Time stamp when the log was recorded in UTC |
| `Type` | Type of the log. Always `AzureDiagnostics` |
| `SubscriptionId` | GUID for the subscription that the server belongs to |
| `ResourceGroup` | Name of the resource group the server belongs to |
| `ResourceProvider` | Name of the resource provider. Always `MICROSOFT.DBFORMYSQL` |
| `ResourceType` | `Servers` |
| `ResourceId` | Resource URI |
| `Resource` | Name of the server |
| `Category` | `MySqlAuditLogs` |
| `OperationName` | `LogEvent` |
| `event_class` | `connection_log` |
| `event_subclass` | `CONNECT`, `DISCONNECT`, `CHANGE USER` (only available for MySQL 5.7) |
| `connection_id` | Unique connection ID generated by MySQL |
| `host` | Blank |
| `ip` | IP address of client connecting to MySQL |
| `user` | Name of user executing the query |
| `db` | Name of database connected to |
| `\_ResourceId` | Resource URI |

### General

Schema below applies to GENERAL, DML_SELECT, DML_NONSELECT, DML, DDL, DCL, and ADMIN event types.

| **Property** | **Description** |
|---|---|
| `TenantId` | Your tenant ID |
| `SourceSystem` | `Azure` |
| `TimeGenerated` [UTC] | Time stamp when the log was recorded in UTC |
| `Type` | Type of the log. Always `AzureDiagnostics` |
| `SubscriptionId` | GUID for the subscription that the server belongs to |
| `ResourceGroup` | Name of the resource group the server belongs to |
| `ResourceProvider` | Name of the resource provider. Always `MICROSOFT.DBFORMYSQL` |
| `ResourceType` | `Servers` |
| `ResourceId` | Resource URI |
| `Resource` | Name of the server |
| `Category` | `MySqlAuditLogs` |
| `OperationName` | `LogEvent` |
| `event_class` | `general_log` |
| `event_subclass` | `LOG`, `ERROR`, `RESULT` (only available for MySQL 5.6) |
| `event_time` | Query start seconds in UNIX timestamp |
| `error_code` | Error code if query failed. `0` means no error |
| `thread_id` | ID of thread that executed the query |
| `host` | Blank |
| `ip` | IP address of client connecting to MySQL |
| `user` | Name of user executing the query |
| `sql_text` | Full query text |
| `\_ResourceId` | Resource URI |

### Table access

| **Property** | **Description** |
|---|---|
| `TenantId` | Your tenant ID |
| `SourceSystem` | `Azure` |
| `TimeGenerated` [UTC] | Time stamp when the log was recorded in UTC |
| `Type` | Type of the log. Always `AzureDiagnostics` |
| `SubscriptionId` | GUID for the subscription that the server belongs to |
| `ResourceGroup` | Name of the resource group the server belongs to |
| `ResourceProvider` | Name of the resource provider. Always `MICROSOFT.DBFORMYSQL` |
| `ResourceType` | `Servers` |
| `ResourceId` | Resource URI |
| `Resource` | Name of the server |
| `Category` | `MySqlAuditLogs` |
| `OperationName` | `LogEvent` |
| `event_class` | `table_access_log` |
| `event_subclass` | `READ`, `INSERT`, `UPDATE`, or `DELETE` |
| `connection_id` | Unique connection ID generated by MySQL |
| `db` | Name of database accessed |
| `table` | Name of table accessed |
| `sql_text` | Full query text |
| `\_ResourceId` | Resource URI |

## Next steps

- [How to configure audit logs in the Azure portal](howto-configure-audit-logs-portal.md)