---
title: Authentication methods | Microsoft Azure Maps
description: In this article, you'll learn about Azure Active Directory (Azure AD) and Shared Key authentication. Both are used for Microsoft Azure Maps services. Learn how to get Azure Maps subscription key.
author: philmea
ms.author: philmea
ms.date: 01/28/2020
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: philmea
ms.custom: mvc
---

# Authentication with Azure Maps

Azure Maps supports two ways to authenticate requests: Shared Key authentication and Azure Active Directory authentication. This article explains these authentication methods to help guide your implementation of Azure Maps services.

> [!NOTE]
> To improve secure communication with Azure Maps, we now support Transport Layer Security (TLS) 1.2, and we're retiring support for TLS 1.0 and 1.1. To avoid any service interruptions, **update your servers and applications to use TLS 1.2 before April 2, 2020**.  If you currently use TLS 1.x, evaluate your TLS 1.2 readiness and develop a migration plan with the testing described in [Solving the TLS 1.0 Problem](https://docs.microsoft.com/security/solving-tls1-problem).

## Shared Key authentication

 Primary and secondary keys are generated after the Azure Maps account is created. You're encouraged to use the primary key as the subscription key when calling Azure Maps using shared key authentication. Shared Key authentication passes a key generated by an Azure Maps account to an Azure Maps service. For each request to Azure Maps services, add the *subscription key* as a parameter to the URL. The secondary key can be used in scenarios like rolling key changes.  

For information about viewing your keys in the Azure portal, see [Manage authentication](https://aka.ms/amauthdetails).

> [!Tip]
> We recommend regenerating your keys regularly. You're provided with two keys, so that you can maintain connections with one key while regenerating the other. When you regenerate your keys, you need to update any applications, that access your account, with the new keys.

## Authentication with Azure Active Directory (Preview)

Azure Maps now offers requests authentication for Azure Maps services using [Azure Active Directory (Azure AD)](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-whatis). Azure AD provides identity-based authentication, including [role-based access control (RBAC)](https://docs.microsoft.com/azure/role-based-access-control/overview). RBAC is used to grant user-level, group-level, or application-level access to Azure Maps resources. The next sections discuss concepts and components of Azure Maps integration with Azure AD.

## Authentication with OAuth access tokens

Azure Maps accepts **OAuth 2.0** access tokens for Azure AD tenants associated with an Azure subscription that contains an Azure Maps account. Azure Maps also accepts tokens for:

* Azure AD users
* Partner applications that use permissions delegated by users
* Managed identities for Azure resources

Azure Maps generates a *unique identifier (client ID)* for each Azure Maps account. You can request tokens from Azure AD when you combine this client ID with additional parameters. To request a token, specify the values in the following table based on your Azure Environment.

| Azure Environment   | Azure AD token endpoint |
| --------------------|-------------------------|
| Azure Public        | https://login.microsoftonline.com |
| Azure Government    | https://login.microsoftonline.us |


For more information about how to configure Azure AD and request tokens for Azure Maps, see [Manage authentication in Azure Maps](https://docs.microsoft.com/azure/azure-maps/how-to-manage-authentication).

For general information about requesting tokens from Azure AD, see [What is authentication?](https://docs.microsoft.com/azure/active-directory/develop/authentication-scenarios).

## Request Azure Map resources with OAuth tokens

After Azure AD receives a token, Azure Maps sends a request with the following set of required request headers:

| Request header    |    Value    |
|:------------------|:------------|
| x-ms-client-id    | 30d7cc….9f55|
| Authorization     | Bearer eyJ0e….HNIVN |

> [!Note]
> `x-ms-client-id` is the Azure Maps account-based GUID that appears on the Azure Maps authentication page.

Here's an example of an Azure Maps route request that uses an OAuth token:

```
GET /route/directions/json?api-version=1.0&query=52.50931,13.42936:52.50274,13.43872 
Host: atlas.microsoft.com 
x-ms-client-id: 30d7cc….9f55 
Authorization: Bearer eyJ0e….HNIVN 
```

For information about viewing your client ID, see [View authentication details](https://aka.ms/amauthdetails).

## Control access with RBAC

In Azure AD, use RBAC to control access to secured resources. Set up your Azure Maps account and register your Azure Maps Azure AD Tenant. Azure Maps supports read access control for individual Azure AD users, groups, applications, Azure resources, and Azure services via managed identities for Azure resources. On the Azure Maps portal page, you can set up RBAC for your chosen roles.

![Azure Maps Data Reader (Preview)](./media/azure-maps-authentication/concept.png)

For information about viewing your RBAC settings, see [How to configure RBAC for Azure Maps](https://aka.ms/amrbac).

## Managed identities for Azure resources and Azure Maps

[Managed identities for Azure resources](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview) provide Azure services with an automatically managed identity, which can be authorized to access Azure Maps services. Some examples of managed identities, include: Azure App Service, Azure Functions, and Azure Virtual Machines.

## Next steps

* To learn more about authenticating an application with Azure AD and Azure Maps, see [Manage authentication in Azure Maps](https://docs.microsoft.com/azure/azure-maps/how-to-manage-authentication).

* To learn more about authenticating the Azure Maps Map Control and Azure AD, see [Use the Azure Maps Map Control](https://aka.ms/amaadmc).
