---
title: Azure Diagnostics extension overview
description: Use Azure diagnostics for debugging, measuring performance, monitoring, traffic analysis in cloud services, virtual machines and service fabric
ms.service:  azure-monitor
ms.subservice: diagnostic-extension
ms.topic: conceptual
author: rboucher
ms.author: robb
ms.date: 02/13/2019

---

# Azure Diagnostics extension overview
The Azure Diagnostics extension is an agent in Azure collects monitoring data from the guest operating system and workloads of Azure compute resources into Azure Monitor. This article provides an overview of Azure Diagnostics extension including specific functionality that it supports and installation options. Links are provided to other documentation for detailed information.


## Resources supported
The Azure Diagnostics extension can be used with any Azure compute resource which includes the following:

- Azure virtual machines (Windows and Linux)
- Azure Service Fabric
- Azure Cloud Service (classic) Web and Worker Roles 

## Data collected
The Azure Diagnostics extension can collect the following types of data:

| Data Source | Description |
| --- | --- |
| Windows Event logs   | Information sent to the Windows event logging system. |
| Syslog               | Information sent to the Linux event logging system.   |
| Performance counters | Numerical values measuring performance of different aspects of operating system and workloads. |
| IIS Logs             | Usage information for IIS web sites running on the guest operating system. |
| Application logs     | Trace messages written by your application. |
| .NET EventSource logs |Code writing events using the .NET [EventSource](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.aspx) class |
| [Manifest based ETW logs](https://docs.microsoft.com/windows/desktop/etw/about-event-tracing) |Event Tracing for Windows events generated by any process.(1) |
| Crash dumps (logs)   | Information about the state of the process if an application crashes. |
| Custom error logs    | Logs created by your application or service. |
| Azure Diagnostic infrastructure logs | Information about Azure Diagnostics itself. |


## Data destinations
The Azure Diagnostic extension collects data into the locations in the following table. Follow the links for details on configuration.

| Destination | Description |
|:---|:---|
| Azure Storage | Writes logs and performance data to tables and blobs in an Azure Storage account. You can either view this data using one of multiple tools or collect it into Log Analytics workspace. See [Store and view diagnostic data in Azure Storage](diagnostics-extension-to-storage.md). |
| Azure Monitor Metrics | Collect performance data to the metrics database in Azure Monitor. See [Send Guest OS metrics to the Azure Monitor metric database](collect-custom-metrics-guestos-resource-manager-vm.md) for virtual machines.  |
| Event hubs | Use Azure Event Hubs to send data outside of Azure. See [Streaming Azure Diagnostics data to Event Hubs](diagnostics-extension-stream-event-hubs.md) |
| Application Insights | Collect data from applications running in your VM to Application Insights to integrate with other application monitoring. See [Send diagnostic data to Application Insights](diagnostics-extension-to-application-insights.md). |
| Azure Monitor Logs | Collect data from Azure Storage to a Log Analytics workspace in Azure Monitor. See [Collect Azure diagnostic logs from Azure Storage](azure-storage-iis-table). |


## Installation options

### Azure portal


## Linux Agent
A [Linux version of the extension](../../virtual-machines/extensions/diagnostics-linux.md) is available for Virtual Machines running Linux. The statistics collected and behavior vary from the Windows version.



(1) To get a list of ETW providers, run `c:\Windows\System32\logman.exe query providers` in a console window on the machine you'd like to gather information from.

## Data storage





You also have the choice of sending your data to Azure Monitor metrics time-series database. At this time, this sink is only applicable to Performance Counters. It enables you to send performance counters in as custom metrics. This feature is in Preview. The Azure Monitor sink supports:
* Retrieving all performance counters sent to Azure Monitor via the [Azure Monitor metrics APIs.](https://docs.microsoft.com/rest/api/monitor/)
* Alerting on all performance counters sent to Azure Monitor via the [metric alerts](../../azure-monitor/platform/alerts-overview.md) in Azure Monitor
* Treating wildcard operator in performance counters as the "Instance" dimension on your metric.  For example if you collected the "LogicalDisk(\*)/DiskWrites/sec" counter you would be able to filter and split on the "Instance" dimension to plot or alert on the Disk Writes/sec for each Logical Disk on the VM (for example, C:)

To learn more on how to configure this sink, refer to the [Azure diagnostics schema documentation.](diagnostics-extension-schema-1dot3.md)

## Costs
Each of the options above may incur costs. Be sure to research them to avoid unexpected bills.  Application Insights, Event hub, and Azure Storage have separate costs associated with ingestion and the time stored. In particular, Azure Storage will hold any data forever so you may want to purge older data after a certain time period to keep your costs down.    

## Versioning and configuration schema
See [Azure Diagnostics Version History and Schema](diagnostics-extension-schema.md).


## Next steps
Choose which service you're trying to collect diagnostics on and use the following articles to get started. Use the general Azure diagnostics links for reference for specific tasks.

## Cloud Services using Azure Diagnostics
* If using Visual Studio, see [Use Visual Studio to trace a Cloud Services application](/visualstudio/azure/vs-azure-tools-debug-cloud-services-virtual-machines) to get started. Otherwise, see
* [How to monitor Cloud services using Azure Diagnostics](../../cloud-services/cloud-services-how-to-monitor.md)
* [Set up Azure Diagnostics in a Cloud Services Application](../../cloud-services/cloud-services-dotnet-diagnostics.md)

For more advanced topics, see

* [Using Azure Diagnostics with Application Insights for Cloud Services](../../azure-monitor/app/cloudservices.md)
* [Trace the flow of a Cloud Services application with Azure Diagnostics](../../cloud-services/cloud-services-dotnet-diagnostics-trace-flow.md)
* [Use PowerShell to set up diagnostics on Cloud Services](../../virtual-machines/extensions/diagnostics-windows.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## Virtual Machines
* If using Visual Studio, see [Use Visual Studio to trace Azure Virtual Machines](/visualstudio/azure/vs-azure-tools-debug-cloud-services-virtual-machines) to get started. Otherwise, see
* [Set up Azure Diagnostics on an Azure Virtual Machine](/azure/virtual-machines/extensions/diagnostics-windows)

For more advanced topics, see

* [Use PowerShell to set up diagnostics on Azure Virtual Machines](../../virtual-machines/extensions/diagnostics-windows.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [Create a Windows Virtual machine with monitoring and diagnostics using Azure Resource Manager Template](../../virtual-machines/extensions/diagnostics-template.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## Service Fabric
Get started at [Monitor a Service Fabric application](../../service-fabric/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md). Many other Service Fabric diagnostics articles are available in the navigation tree on the left once you get to this article.

## General articles
* Learn to [use Performance Counters in Azure Diagnostics](../../cloud-services/diagnostics-performance-counters.md).
* If you have trouble with diagnostics starting or finding your data in Azure storage tables, see [TroubleShooting Azure Diagnostics](diagnostics-extension-troubleshooting.md)

