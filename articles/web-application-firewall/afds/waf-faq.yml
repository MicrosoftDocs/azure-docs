### YamlMime:FAQ
metadata:
  title: Azure Web Application Firewall on Azure Front Door - Frequently Asked Questions
  description: This article provides answers to frequently asked questions about Azure Web Application Firewall on Azure Front Door.
  author: halkazwini
  ms.author: halkazwini
  ms.service: azure-web-application-firewall
  ms.topic: faq
  ms.date: 07/11/2022
title: Frequently asked questions for Azure Web Application Firewall on Azure Front Door
summary: This article answers common questions about features and functionality for Azure Web Application Firewall on Azure Front Door. 


sections:
  - name: Ignored
    questions:
      - question: |
          What is Azure Web Application Firewall?
        answer: |
          Azure Web Application Firewall is a web application firewall (WAF) that helps protect your web applications from common threats such as SQL injection, cross-site scripting, and other web exploits. You can define a WAF policy that consists of a combination of custom and managed rules to control access to your web applications.
          
          You can apply a WAF policy to web applications hosted on Azure Application Gateway or Azure Front Door.
          
      - question: |
          What is Azure Web Application Firewall on Azure Front Door? 
        answer: |
          Azure Front Door is an application and content delivery network that's highly scalable and globally distributed. Azure Web Application Firewall, when it's integrated with Azure Front Door, stops denial-of-service and targeted application attacks at the Azure network edge (close to attack sources) before they enter your virtual network. This combination offers protection without sacrificing performance.

      - question: |
          Does Azure Web Application Firewall support HTTPS?
        answer: |
          Azure Front Door offers Transport Layer Security (TLS) offloading. Azure Web Application Firewall is natively integrated with Azure Front Door and can inspect a request after it's decrypted.

      - question: |
          Does Azure Web Application Firewall support IPv6?
        answer: |
          Yes. You can configure IP restriction for IPv4 and IPv6. For more information, see the [blog post on IPv6 adoption for enhancing Azure Web Application Firewall on Azure Front Door](https://techcommunity.microsoft.com/t5/azure-network-security-blog/ipv6-adoption-enhancing-azure-waf-on-front-door/ba-p/4284188).

      - question: |
          How up to date are the managed rule sets?
        answer: |
          We do our best to keep up with changing threat landscape. When we update a rule, we add it to the Default Rule Set (DRS) with a new version number.

      - question: |
          What is the propagation time if I make a change to my WAF policy?
        answer: |
          Most WAF policy deployments finish in less than 20 minutes. You can expect the policy to take effect as soon as the update is completed across all edge locations globally.

      - question: |
          Can WAF policies be different for different regions?
        answer: |
          When Azure Web Application Firewall is integrated with Azure Front Door, the WAF is a global resource. The same configuration applies across all Azure Front Door locations.

      - question: |
          How do I make sure that only Azure Front Door can access the back end in my network?
        answer: |
          You can configure an IP access control list in your back end to allow for only Azure Front Door outbound IP address ranges by using an Azure Front Door service tag and deny any direct access from the internet. Service tags are supported for your virtual network. Additionally, you can verify that the `X-Forwarded-Host` HTTP header field is valid for your web application.

      - question: |
          Which WAF options should I choose?
        answer: |
          There are two options for applying WAF policies in Azure. Azure Web Application Firewall on Azure Front Door is a globally distributed, edge security solution. Azure Web Application Firewall on Application Gateway is a regional, dedicated solution. We recommend that you choose a solution based on your overall performance and security requirements. For more information, see [Load balancing options](../../frontdoor/front-door-lb-with-azure-app-delivery-suite.md).
          
      - question: |
          What's the recommended approach to enabling a WAF on Azure Front Door?
        answer: |
          When you enable the WAF on an existing application, it's common to have false-positive detections in which the WAF rules detect legitimate traffic as a threat. To minimize the risk of an impact to your users, we recommend the following process:
          
          1. Enable the WAF in [detection mode](./waf-front-door-create-portal.md#change-mode) to ensure that the WAF doesn't block requests while you're working through this process. We recommend this step for testing purposes on the WAF.
          
             > [!IMPORTANT]
             > This process describes how to enable the WAF on a new or existing solution when your priority is to minimize the disturbance to your application's users. If you're under attack or imminent threat, you might want to instead deploy the WAF in prevention mode immediately. You can then use the tuning process to monitor and tune the WAF over time. This approach will probably cause some of your legitimate traffic to be blocked, which is why we recommend using it only when you're under threat.
          1. Follow the [guidance for tuning the WAF](./waf-front-door-tuning.md). This process requires that you enable diagnostic logging, review the logs regularly, and add rule exclusions and other mitigations.
          1. Repeat this whole process and check the logs regularly, until you're satisfied that no legitimate traffic is being blocked. The whole process might take several weeks. Ideally, you should see fewer false-positive detections after each tuning change that you make.
          1. Finally, enable the WAF in prevention mode.
          
          Even after you're running the WAF in production, you should keep monitoring the logs to identify any other false-positive detections. Regularly reviewing the logs also helps you identify any real attack attempts that were blocked.
          
      - question: |
          Do you support the same WAF features in all integrated platforms?
        answer: |
          Currently, Core Rule Set (CRS) 3.0, CRS 3.1, and CRS 3.2 rules are supported only with Azure Web Application Firewall on Application Gateway. Rate limiting and Azure-managed DRS rules are supported only with Azure Web Application Firewall on Azure Front Door.

      - question: |
          Is DDoS protection integrated with Azure Front Door? 
        answer: |
          Azure Front Door is globally distributed at Azure network edges. It can absorb and geographically isolate large-volume attacks. You can create a custom WAF policy to automatically block and rate limit HTTP and HTTPS attacks that have known signatures. You can also enable distributed denial-of-service (DDoS) network protection on the virtual network where your back ends are deployed.
          
          Customers of the Azure DDoS Protection service receive additional benefits, including cost protection, a service-level agreement (SLA) guarantee, and access to experts from the DDoS Rapid Response Team for immediate help during an attack. For more information, see [DDoS Protection on Azure Front Door](../../frontdoor/front-door-ddos.md).
          
      - question: |
          Why do additional requests above the threshold configured for my rate-limit rule get passed to my back-end server?
        answer: |
          You might not see requests immediately blocked by the rate limit when different Azure Front Door servers process requests. For more information, see [Rate limits and Azure Front Door servers](waf-front-door-rate-limit.md#rate-limits-and-azure-front-door-servers).

      - question: |
          What content types does the WAF support?
        answer: |
          The Azure Front Door WAF supports the following content types:
          
          - **DRS 2.0**

            Managed rules:
            * `application/json`
            * `application/xml`
            * `application/x-www-form-urlencoded`
            * `multipart/form-data`

            Custom rules:
            * `application/x-www-form-urlencoded`

          - **DRS 1.x**

            Managed rules:
            * `application/x-www-form-urlencoded`
            * `text/plain`

            Custom rules:
            * `application/x-www-form-urlencoded`

      - question: |
          Can I apply an Azure Front Door WAF policy to front-end hosts in Azure Front Door Premium profiles that belong to different subscriptions?
        answer: |
          No, you can't. The Azure Front Door profile and the WAF policy need to be in the same subscription.

additionalContent: |

  ## Related content
  
  - [What is Azure Web Application Firewall?](../overview.md)
  - [What is Azure Front Door?](../../frontdoor/front-door-overview.md)
