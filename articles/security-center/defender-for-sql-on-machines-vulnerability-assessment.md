---
title: Using Azure Security Center's integrated vulnerability assessment scanner for SQL servers
description: Learn about Azure Defender for SQL servers on machines' integrated vulnerability assessment scanner
author: memildin
ms.author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 04/09/2021
---

# Using the integrated vulnerability assessment scanner for your SQL servers

**Azure Defender for SQL servers on machines** extends the protections for your Azure-native SQL Servers to fully support hybrid environments and protect SQL servers (all supported version) hosted in Azure, other cloud environments, and even on-premises machines:
- [SQL Server on Virtual Machines](https://azure.microsoft.com/services/virtual-machines/sql-server/)
- On-premises SQL servers:
  - [Azure Arc enabled SQL Server (preview)](/sql/sql-server/azure-arc/overview)
  - [SQL Server running on Windows machines without Azure Arc](../azure-monitor/agents/agent-windows.md)

The integrated [vulnerability assessment scanner](../azure-sql/database/sql-vulnerability-assessment.md) discovers, tracks, and helps you remediate potential database vulnerabilities. Assessment scans findings provide an overview of your SQL machines' security state, and details of any security findings.

## Explore vulnerability assessment reports

The vulnerability assessment service scans your databases once a week. The scans run on the same day of the week on which you enabled the service.

The vulnerability assessment dashboard provides an overview of your assessment results across all your databases, along with a summary of healthy and unhealthy databases, and an overall summary of failing checks according to risk distribution.

You can view the vulnerability assessment results directly from Security Center.

1. From Security Center's sidebar, open the **Recommendations** page.

1. Select the recommendation **Vulnerability assessment findings on your SQL servers on machines should be remediated (Preview)**. For more information, see the [Security Center recommendations reference page](security-center-recommendations.md). 

    :::image type="content" source="./media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png" alt-text="Vulnerability Assessment findings on your SQL servers on machines should be remediated (Preview)":::

    The detailed view for this recommendation appears.

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/sql-vulnerability-findings.png" alt-text="Detailed view for the recommendation":::

1. For more details, drill down:

    - For an overview of scanned resources (databases) and the list of security checks that were tested, open the **Affected resources** and select the server of interest.

    - For an overview of the vulnerabilities grouped by a specific SQL database, select the database of interest.

    In each view, the security checks are sorted by **Severity**. Select a specific security check to see a details pane with a **Description**, how to **Remediate** it, and other related information such as **Impact** or **Benchmark**.

## View vulnerabilities in graphical, interactive reports

Security Center's integrated Azure Monitor Workbooks gallery includes an interactive report of all findings from the vulnerability scanners for machines, containers in container registries, and SQL servers.

Findings for each of these scanners are reported in separate recommendations:

- Vulnerabilities in your virtual machines should be remediated
- Vulnerabilities in Azure Container Registry images should be remediated (powered by Qualys)
- Vulnerability assessment findings on your SQL databases should be remediated
- Vulnerability assessment findings on your SQL servers on machines should be remediated

The 'Vulnerability Assessment Findings' report gathers all of these findings and organizes them by severity, resource type, and category. You can find the report in the workbooks gallery available from Security Center's sidebar.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/vulnerability-assessment-findings-report-sql.png" alt-text="Security Center's vulnerability assessment findings report":::


## Disable specific findings (preview)

If you have an organizational need to ignore a finding, rather than remediate it, you can optionally disable it. Disabled findings don't impact your secure score or generate unwanted noise.

When a finding matches the criteria you've defined in your disable rules, it won't appear in the list of findings. Typical scenarios include:

- Disable findings with severity below medium
- Disable findings that are non-patchable
- Disable findings from benchmarks that aren't of interest for a defined scope

> [!IMPORTANT]
> To disable specific findings, you need permissions to edit a policy in Azure Policy. Learn more in [Azure RBAC permissions in Azure Policy](../governance/policy/overview.md#azure-rbac-permissions-in-azure-policy).

To create a rule:

1. From the recommendations detail page for **Vulnerability assessment findings on your SQL servers on machines should be remediated**, select **Disable rule**.

1. Select the relevant scope.

1. Define your criteria. You can use any of the following criteria: 
    - Finding ID 
    - Severity 
    - Benchmarks 

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/disable-rule-vulnerability-findings-sql.png" alt-text="Create a disable rule for VA findings on SQL servers on machines":::

1. Select **Apply rule**. Changes might take up to 24hrs to take effect.

1. To view, override, or delete a rule: 

    1. Select **Disable rule**.

    1. From the scope list, subscriptions with active rules show as **Rule applied**.

        :::image type="content" source="./media/remediate-vulnerability-findings-vm/modify-rule.png" alt-text="Modify or delete an existing rule":::

    1. To view or delete the rule, select the ellipsis menu ("...").

## Manage vulnerability assessments programmatically

### Using Azure PowerShell

You can use Azure PowerShell cmdlets to programmatically manage your vulnerability assessments. The supported cmdlets are:

| Cmdlet name as a link | Description |
| :-------------------- | :---------- |
| [Add-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/add-azsecuritysqlvulnerabilityassessmentbaseline) | Add SQL Vulnerability Assessment baseline. |
| [Get-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentbaseline) | Get SQL Vulnerability Assessment baseline. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanResult](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanresult) | Gets SQL Vulnerability Assessment scan results. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanRecord](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanrecord) | Gets SQL Vulnerability Assessment scan records. |
| [Remove-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/remove-azsecuritysqlvulnerabilityassessmentbaseline) | Removes SQL Vulnerability Assesment baseline. |
| [Set-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/set-azsecuritysqlvulnerabilityassessmentbaseline) | Sets new SQL Vulnerability Assessment baseline on a specific database discards old baseline if any exists. |
| &nbsp; | &nbsp; |

## Next steps

Learn more about Security Center's protections for SQL resources in [Introduction to Azure Defender for SQL](defender-for-sql-introduction.md).
