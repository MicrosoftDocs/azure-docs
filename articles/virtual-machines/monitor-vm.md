---
title: Monitoring Azure virtual machines
description: Start here to learn how to monitor Azure virtual machines
ms.service: virtual-machines
ms.topic: article
ms.custom: subject-monitoring
ms.date: 11/17/2021
---

# Monitoring Azure virtual machines

When you have critical applications and business processes relying on Azure resources, you want to monitor those resources for their availability, performance, and operation. This article describes the monitoring data generated by Azure virtual machines and how you can use the features of [Azure Monitor](/azure/azure-monitor/overview) to analyze and alert on this data.

> [!NOTE]
> This article provides basic information for getting started monitoring an Azure virtual machine. For a complete guide to monitoring your entire environment of Azure and hybrid virtual machines, see [Monitor virtual machines with Azure Monitor](../azure-monitor/vm/monitor-virtual-machine.md).

## What is Azure Monitor?
[Azure Monitor](/azure/azure-monitor/overview) is a full stack monitoring service that provides a complete set of features to monitor your Azure resources. You don't need to directly interact with Azure Monitor though to perform a variety of monitoring tasks since its features are integrated into the Azure portal for Azure services that it monitors. If you're interested in a tutorial with an overview of how Azure Monitor works with Azure resources, see [Monitoring Azure resources with Azure Monitor](../azure-monitor/essentials/monitor-azure-resource.md).

## Monitoring data

Azure virtual machines collect the same kinds of monitoring data as other Azure resources that are described in [Monitoring data from Azure resources](/azure/azure-monitor/insights/monitor-azure-resource#monitoring-data). See [Monitoring Azure virtual machines data reference](monitor-vm-reference.md) for detailed information on the metrics and logs created by Azure virtual machines.

## Overview page
Start with the **Monitoring** tab on the **Overview** page for your virtual machine. This includes charts that show key health metrics such as average CPU and network utilization. Click on a duration to change the time range for the charts or click on a chart to open metrics explorer to drill down further or to create an alert rule. 

:::image type="content" source="media/monitor-vm/overview.png" lightbox="media/monitor-vm/overview.png" alt-text="Azure virtual machine overview page":::

## Activity log
The [Activity log](../azure-monitor/essentials/activity-log.md) shows you recent activity by the virtual machine including any configuration changes and when it was stopped and started. View the Activity log in the Azure portal, or create a [diagnostic setting to send it to a Log Analytics workspace](../azure-monitor/essentials/activity-log.md#send-to-log-analytics-workspace) where you can view events over time or analyze them with other collected data.

:::image type="content" source="media/monitor-vm/activity-log.png" lightbox="media/monitor-vm/activity-log.png" alt-text="Activity log":::

## VM insights
Some services in Azure have a customized monitoring experience in Azure Monitor that includes pre-built workbooks and other specialized features for that particular service. These experiences are called *insights*. 

VM insights is designed to monitor your entire set of Azure and hybrid virtual machines together in a single interface. When you start monitoring multiple virtual machines in your Azure environment, you should consider enabling VM insights for the following features:

- Simplified onboarding of Log Analytics agent and Dependency agent to enable monitoring of a virtual machine guest operating system and workloads.
- Pre-defined trending performance charts and workbooks that allow you to analyze core performance metrics from the virtual machine's guest operating system.
- Dependency map that displays processes running on each virtual machine and the interconnected components with other machines and external sources.

:::image type="content" source="media/monitor-vm/vminsights-01.png" lightbox="media/monitor-vm/vminsights-01.png" alt-text="VM insights performance view":::

:::image type="content" source="media/monitor-vm/vminsights-02.png" lightbox="media/monitor-vm/vminsights-02.png" alt-text="VM insights map view":::

See [Enable Azure Monitor for single virtual machine or virtual machine scale set in the Azure portal](../azure-monitor/vm/vminsights-enable-portal.md) for quick steps to configure VM insights and enable monitoring for a virtual machine. See [Enable VM insights overview](../azure-monitor/vm/vminsights-enable-overview.md) for general information on enabling insights and different methods for onboarding virtual machines.

## Collect guest metrics and logs
Azure Monitor starts collecting metric data for your virtual machine host automatically when the machine is created. To collect metrics from the guest operating system of the virtual machine though, you must install an agent. When you enable [VM insights](#vm-insights), the Log Analytics agent is installed and starts sending performance data to Azure Monitor Logs, which enables the **performance** and **map** views. See [Tutorial: Enable monitoring for Azure virtual machine](../azure-monitor/vm/tutorial-monitor-vm-enable.md) for a tutorial on enabling VM insights for a virtual machine.

After VM insights is enabled, install the [Azure Monitor agent](../azure-monitor/agents/azure-monitor-agent-overview.md) to collect guest logs from your virtual machine and to send guest metrics to Azure Monitor Metrics. This enables you to [analyze metrics with metrics explorer](#analyze-metrics).  See [Tutorial: Collect guest logs and metrics from Azure virtual machine](../azure-monitor/vm/tutorial-monitor-vm-guest.md) to learn how to install Azure Monitor agent and create a data collection rule which defines the data to collect.

## Analyze metrics
Metrics are numerical values that describe some aspect of a system at a particular point in time. Platform metrics for the virtual machine host are collected automatically, while you must [install the Azure Monitor agent](#collect-guest-metrics-and-logs) to collect guest metrics. 

The **Overview** page includes the most common host metrics, you can access others using metrics explorer.  This tool allows you to create charts from metric values and visually correlate trends. You can create also create a metric alert rule or pin a chart to an Azure dashboard. See [Analyze metrics for an Azure resource](/azure-monitor/essentials/tutorial-metrics) for a tutorial on using this tool.

:::image type="content" source="media/monitor-vm/metrics-explorer.png" lightbox="media/monitor-vm/metrics-explorer.png" alt-text="Metrics explorer":::

See [Monitoring Azure virtual machines data reference](monitor-vm-reference.md#metrics) for a list of the metrics that are available. 

## Analyze logs
Data in Azure Monitor Logs is stored in a Log Analytics workspace where it's separated into tables that each has its own set of unique properties. 

VM insights stores the data it collects in Logs but provides performance and map views that allow you to interactively analyze its data. You can work direct with this data is you want to drill down further or perform custom analysis. See [How to query logs from VM insights](../azure-monitor/vm/vminsights-log-search.md) for details and sample queries for this data.

To analyze other log data you collect from your virtual machines, use [log queries](../azure-monitor/logs/get-started-queries.md) in [Log Analytics](../azure-monitor/logs/log-analytics-tutorial.md). Several [built-in queries](../azure-monitor/logs/queries.md) for virtual machine are available to use, or you can create your own. You can either interactively work with the results of these queries, include them in a workbook to make them available to other users, or generate alerts based on their results.

:::image type="content" source="media/monitor-vm/log-analytics-query.png" lightbox="media/monitor-vm/log-analytics-query.png" alt-text="Log Analytics query":::

## Alerts
Azure Monitor alerts proactively notify you when important conditions are found in your monitoring data. They allow you to identify and address issues in your system before your customers notice them. You can set alerts on [metrics](/azure/azure-monitor/platform/alerts-metric-overview), [logs](/azure/azure-monitor/platform/alerts-unified-log), and the [activity log](/azure/azure-monitor/platform/activity-log-alerts). 

Multiple resources are available describing alerts for Azure virtual machines:

- See [Create alert when Azure virtual machine is unavailable](../azure-monitor/vm/tutorial-monitor-vm-alert.md) for a tutorial on creating a log query alert for when a virtual machine is unresponsive.
- See [Monitor virtual machines with Azure Monitor: Alerts](../azure-monitor/vm/monitor-virtual-machine-alerts.md) for common alert rules for virtual machines. 
- See [Monitor virtual machines with Azure Monitor: Workloads](../azure-monitor/vm/monitor-virtual-machine-workloads.md) for data you can collect from workloads running on virtual machines that you can leverage for alerting.
- For common log alert rules, see the **Queries** in Log Analytics for **Resource type** of *Virtual machines* and type of **Alerts**. See [Create a log query alert for an Azure resource](../azure-monitor/alerts/tutorial-log-alert.md) for a tutorial on creating a log query alert rule.


## Next steps

- See [Azure virtual machine monitoring data reference](monitor-vm-reference.md) for a reference of the logs and metrics created by Azure virtual machines.
