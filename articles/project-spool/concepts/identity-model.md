---
title: Identity model in ACS
description: Learn how entities are represented in ACS world
author: ...    
manager: ...
services: azure-project-spool

ms.author: ...
ms.date: 05/06/2020
ms.topic: conceptual
ms.service: azure-project-spool

---


# Users

Azure Communication Services is a user oriented platform. Users are entities that can communicate with one another by participating in chat threads and calls. They are identified by a unique ID and authenticate directly to Azure Communications Services via [user access tokens](./user-access-tokens.md).

## Creating Users

Users are implicitly created when you request a [user access token](./user-access-tokens.md) without providing a user ID. 

```csharp
var configurationClient = new ConfigurationClient(CONNECTION_STRING);
var tokenResult = await configurationClient.CreateUserAccessTokenAsync();

// unique User ID
String userID = tokenResult.id;
```

It is possible for the same user to have simultaneous sessions across multiple devices and SDKs, so you may store a mapping between Azure Communication Users and the users of your application and re-issue additional access tokens for the same user over time.

```csharp
public async Task<String> IssueAccessToken(string userId)
{    
    // initialize the configuration client with a connection string
    // retrieved from the Azure Portal
    var configurationClient = new ConfigurationClient(CONNECTION_STRING);
    
    // create a user access token for the provided identity
    var tokenResult = await configurationClient.CreateUserAccessTokenAsync(userId);
    
    // return a the freshly minted token for the user
    return tokenResult.token;
}
```
It is also to treat users as ephemeral entities that are created for a single call or chat conversation.

## Connecting Users

The User IDs in Azure Communication Services are analagous to phone numbers. Any user can initiate a chat or call with any other user provided they are able to discover that user's ID.

### Chat

> TODO something about threads

### Calling

> TODO something about calls

### User Types

Every addressable entity in ACS world, a user, bot, pstn number, short code, application ... is represented by special type :
* user - UserIdentity represents an object in ACS world that maps ACS Identity to a to an entity in your system
* pstn numbers - PhoneNumberIdentity represents an entity in ACS world that maps to a phone number.
* bot | server application - BotIdentity represents an entity in ACS world that maps to a particular bot or server application, identified by ACS Identity or bot APP ID

When your application interacts with other entities in the ACS system using ACS client SDKs you'll use corresponding Identity objects.
Identity types defines set of properties:
* Type - user | bot | pstn | ...
* AcsId, depending on the type:
  * ACS Identity - a unique string, generated by ACS service for a given entity in your system
  * APP ID - representing id of a 1p or 3p bot provisioned through ACS
  * phone number - in case of phone number identity
  * short code..

Identity interface:
```cs
public enum IdentityType
{
  User,
  Bot,
  Pstn,
  ...
}
interface IIdentity
 {
     IdentityType Type { get; }
     string AcsId { get; }
 }
 interface IUserIdentity: IIdentity {}
 interface IBotIdentity: IIdentity {}
 interface IPstnIdentity: IIdentity {}

```

## Create Identity instance
To create Identity object you have to create an instance of class for corresponding identity type:

```javascript
const { ChatClient, UserIdentity, BotIdentity, PstnIdentity } = require('@azure/communicationservices-chat');
const client = new ChatClient(endpoint, userAccessToken);

const userIdentity = new UserIdentity('acs_identity__for_bob'); 
const pstnIdentity = new PstnIdentity('pstn_number_e_164'); 
const botIdentity = new BotIdentity('acs_identity__for_bot'); 
```

## Use Identity with ACS Client SDK
To interact with other addressable entities in your system using ACS Client SDK you have to address them using Identity objects
```javascript
const { ChatClient } = require('@azure/communicationservices-chat');
const { CallClient } = require('@azure/communicationservices-calling');
const { SmsClient } = require('@azure/communicationservices-sms');
// create client for alice@contoso.com
const chatClient = new ChatClient(endpoint, userAccessToken);
const callingClient = new CallClient(endpoint, userAccessToken);
const smsClient = new SmsClient(endpoint, userAccessToken);

// create Identity objects
const bobUserIdentity = new UserIdentity('acs_identity_for_bob'); 
const bobPhoneIdentity = new PstnIdentity('bob_phone_number_e_164'); 

// send message from alice to bob
chatClient.send('message', {recipients: [bobUserIdentity]});
// send message from alice to bob
SmsClient.send('message', {recipients: [bobPhoneIdentity]});
// alice starts call with bob
callingClient.call([bobUserIdentity, bobPhoneIdentity]);
```

Same Identity types are used to represent all entities in ACS system, e.g. participants in a chat or ongoing call:

```js
const callClient = CallClientFactory.create('token_for_acs_id_1');
const callee1Identity = new UserIdentity('acs_id_2');
const callee2Identity = new PstnIdentity('+123456789');
const call = callClient.call([callee1Identity, callee2Identity]);

// on a callee side
callClient.on('callAdded', call => {
  call.callerIdentity.type ==== 'User' // true
  call.callerIdentity.acsId === 'acs_id_1' // true
  call.accept();
})

// call connected.. on a caller side:
const callParticipant1Identity = call.remoteParticipants[0].identity; // user participant
const callParticipant2Identity = call.remoteParticipants[0].identity; // PSTN participant

callParticipant1Identity.type === 'User'; // true
callParticipant1Identity.acsId === 'acs_id_1'; // true
callParticipant2Identity.type === 'PhoneNumber'; // true
callParticipant2Identity.acsId === '+123456789'; // true

// similar for chat or any other ACS client SDK..
```

## ACS Identity to real identity resolution

ACS will not provide a way for customers to provide customer specific identities and will not store any type of data that would map an ACS Identity to a customer specific identity. Therefore, ACS will have no knowledge of how customer has assigned the ACS Identity.

You as a customer have to maintain map of ACS identities to entities in your system, in a way that is suitable to satisfy requirements of the system you're building, for example by storing this mapping in a (non)persistent database.

## Deleting Users
