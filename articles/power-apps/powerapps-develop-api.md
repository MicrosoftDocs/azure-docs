<properties
	pageTitle="Develop API for PowerApps (.Net) | Microsoft Azure"
	description="Develop API for PowerApps (.Net)"
	services="powerapps"
	documentationCenter="" 
	authors="rajram"
	manager="dwrede"
	editor=""/>

<tags
   ms.service="powerapps"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na" 
   ms.date="11/10/2015"
   ms.author="rajram"/>

# Develop an API for PowerApps in .Net

You can create or develop your own API that can be used within PowerApps. The steps include:

- Author your web API
- Generate Swagger for your web API

This topic lists these steps. 


## Step 1: Create your web API
Creating an API for PowerApps is just like creating any web API. In Visual Studio,  create a new ASP.Net web application using the API App template.  

To get started, follow the steps in [Create an ASP.NET API app in Azure App Service](../app-service-api-dotnet-get-started.md).

> ToDo: Need to update the API App article or author another one to reflect the latest changes

## Step 2: Generate Swagger for your web API
When you create a web API, [Swashbuckle][2] automatically adds a [Swagger][3] file to your project.

To get an overview of Swashbuckle integration, click [here](../app-service-api-dotnet-swashbuckle-customize.md).

### Schema extensions
In addition to the swagger automatically-generated by Swashbuckle, there are some additional swagger extensions available when creating an API for PowerApps. This section lists and describes these extensions. 

##### x-ms-summary
A string that describes the display names for entities that do not have a summary field defined in the Swagger spec. **Parameter names** is an example. 

##### x-ms-visibility
This value describes whether the entity will be displayed in the Logic Flow designer.

The following values are available: 

- “none” (default)
- “advanced”
- “internal” - Logic Flow designer does not show these operations

If an operation is marked as "important", the Logic Flow client is expected to highlight these operations.

##### x-ms-trigger
Defines whether this operation can be used as a trigger in Logic Flow. Options include:
	
- none (default): The operation cannot be used as a trigger.
- single: This operation can also be used as a trigger.
- batched: This operation can be used as a trigger.  In addition, this operation responds with a JSON  'array' of objects, and the Logic Flow fires a trigger for each item in the array.


##### x-ms-dynamic-values
This is a hint to the Logic Flow designer that the API provides a list of dynamically allowed values for this parameter. The Logic Flow designer can invoke an operation as defined by the value of this field, and extract the possible values from the result.  The Logic Flow designer can then display these values as options to the end user.  

The value is an object that contains the following properties:
	
- operationId: A string that matches the operationId for the operation that is invoked
- parameters: An object whose properties define the parameters required for the operation
- value-collection: A path string that evaluates to an array of objects in the response payload
- value-path: A path string in the object inside "value-collection" that refers to the value for the parameter.
- value-title: A path string in the object inside "value-collection" that refers to a description for the value.


Example:
```javascript

       "/api/tables/{table}/items": {
            "post": {
                "operationId": "TableData_CreateItem",
                "summary": "Create an object in {Salesforce}",
                "parameters": [
                    {
                        "name": "table",
                        "x-ms-summary": "Object Type",
                        "x-ms-dynamic-values": {
                            "operationId": "TableMetadata_ListTables",      // operation that needs to be invoked
                            "parameters": { },                              // parameters for the above operation, if any
                            "value-collection": "values",                   // field that contains the collection
                            "value-path": "Name",                           // field that contains the value
                            "value-title": "DisplayName"                    // field that contains a display name for the value
                        },
```

In the above example, the swagger defines an operation called _TableData_CreateItem_ that creates a new object in Salesforce. 

Salesforce has a lot of built in objects. _x-ms-dynamic-values_ is used here to help the designer figure out the list of the built in Salesforce objects. It obtains it by calling _TableMetadata_ListTables_.

##### x-ms-dynamic-schema
This is a hint to the Logic Flow designer that the schema for this parameter (or response) is dynamic in nature.  It can invoke an operation as defined by the value of this field, and discover the schema dynamically.  It can then display an appropriate UI to take inputs from the user or display available fields.  

>ToDo: Explain what this example is doing.

Example:
 
```javascript
{
"name": "item",
"in": "body",
"required": true,
"x-ms-dynamic-schema": {
	"operationId": "Metadata_GetTableSchema",
	"parameters": {
		"tablename": "{table}"              // the value that the user has selected from the above parameter
		},
	"value-path": "Schema"                // the field that contains the JSON schema
},
```

This is useful in scenarios where the inputs to an operation are dynamic. For example, consider the case of SQL. The schema of each table is different. Hence, when a user selects a particular table the Logic Flow designer needs to understand the structure of it so that it can display the column names. In this context, if the swagger definition has _x-ms-dynamic-schema_, it will call the corresponding operation to fetch the schema.



<!--References-->
[2]: https://github.com/domaindrivendev/Swashbuckle
[3]: http://swagger.io/